package com.alaimos.MITHrIL.app;

import org.apache.commons.math3.stat.descriptive.rank.Median;
import org.apache.commons.math3.stat.descriptive.rank.PSquarePercentile;

public class MedianTest {

    private static final double[] data1 = new double[]{
            6.696268, 1.00783, -14.03215, 6.422214, -2.707009, -3.148173, -4.496313, -14.76025, -2.327819, -3.533572,
            -3.706345, 17.19649, 32.00681, 6.860977, -1.387642, 3.414498, 8.086669, -20.96474, 9.649526, 7.441454,
            15.53656, 11.35886, 2.995246, 13.4143, -4.754082, -5.936549, 6.700064, -20.4014, 1.359191, -17.39985,
            10.26718, 10.54245, 5.719854, -16.11106, 9.946806, -8.728089, -6.311542, -17.64362, -6.808764, -12.25746,
            -2.711725, 13.43024, -5.413421, -9.406159, -17.12718, -6.257173, -3.367456, -2.686539, 3.002882, -17.39361,
            -1.528724, 2.739714, 20.59453, -16.28029, 2.140754, -7.799272, 5.745347, 15.0319, 12.47799, 9.224455,
            -0.4681993, -4.754723, -10.41325, -1.615571, 3.785142, 9.476484, -1.028655, 5.524788, 2.910882, 4.493115,
            -4.273049, -1.256128, -6.23887, 8.163945, -3.230568, -16.57426, 4.039762, -3.486459, -2.778937, 19.03614,
            -3.168952, 1.511292, 17.7635, -14.4919, -4.764004, 14.6586, -8.171899, 25.8046, 9.286652, -17.94809,
            5.531172, -6.972905, 9.479166, 6.4306, -4.780231, 9.707169, -9.382378, 13.84137, 1.200477, 4.783165
    };

    private static final double[] data2 = new double[]{
            -3.448443, 7.436838, -10.39301, -11.74736, 10.12447, -7.685786, 0.03305773, -12.96887, -11.79773, -1.067814,
            -14.66859, -9.638379, -9.234407, 1.199855, -5.963704, 1.62192, 10.96944, 2.489962, -7.748303, 10.70617,
            -15.714, -0.5185813, 22.05497, -11.94395, -5.863931, 0.4452804, -6.179867, 19.44127, -4.515997, 20.39381,
            -10.3961, 4.260942, -1.43935, -22.50611, -1.740374, 0.9755907, 10.23509, 15.51116, 2.989877, -10.96876,
            11.0771, 23.57906, -11.11523, 1.742315, 8.59721, -0.9399702, 1.998629, -3.263837, 8.434639, -15.38014,
            -0.6033835, -8.198948, 14.58382, -6.453916, -0.796359, 3.188393, -1.521468, -3.969575, 3.768801, 11.33145,
            -16.62597, -8.599306, -4.276701, 5.398666, 10.27371, -2.990719, 3.82374, 8.065527, 5.409913, -6.531577,
            8.145774, 0.8918159, -4.930335, -9.675431, 19.08381, -7.902582, 7.478211, -7.30624, -1.298655, 1.060418,
            3.843446, -9.250148, 4.612817, 6.034199, -0.3762965, -8.826528, -11.67826, -1.274473, 5.48322, 2.333935,
            -6.967275, 4.517293, 2.354497, -1.337378, -4.888207, -14.28571, -16.95845, -12.26073, -3.764974, 7.103119
    };

    private static final double[] data3 = new double[]{
            -14.52501, -9.367516, 0.6099207, 2.792017, 4.242798, 7.477135, 8.572798, 1.381774, -25.65266, -4.206176,
            -2.206439, -0.2082383, 10.29724, -1.235708, 14.26172, -3.598293, -14.01194, -15.35014, 3.923703, -2.981558,
            -15.66041, 0.2464428, 25.53505, 14.115, 4.00495, 9.087243, 11.96273, -7.501343, -1.756835, -3.878066,
            13.72966, -7.05876, 19.10806, -21.93118, 6.582051, 1.93809, 4.845949, -7.381167, -1.428679, 2.556013,
            3.219547, 16.46286, 0.2672256, 9.472426, -24.56399, -5.544314, 14.43111, 2.30631, 3.3978, 1.847367,
            -0.971119, -3.394199, 21.36789, -3.018663, 4.53675, 7.940317, 1.220153, -11.99163, -3.724768, -11.92465,
            -17.07073, 9.359135, 4.384314, 11.85292, -2.279712, -12.85259, 2.788386, 17.56318, -4.065743, 14.86537,
            -11.95837, -0.2777209, 5.917445, -9.312178, 3.936983, 15.82198, 18.61993, 1.962868, -8.238335, 15.4633,
            2.85969, -18.49088, 18.61358, 16.52532, 5.613623, -2.500963, -6.775441, 2.027076, -6.65874, -0.4748325,
            -13.6486, 17.8382, 11.51338, -16.30217, 5.80014, -0.9293514, -6.214053, 3.089279, 7.759668, -12.42052
    };


    public static void main(String[] args) {
        // merge the arrays data1, data2, data3 into one array data
        var data = new double[data1.length + data2.length + data3.length];
        System.arraycopy(data1, 0, data, 0, data1.length);
        System.arraycopy(data2, 0, data, data1.length, data2.length);
        System.arraycopy(data3, 0, data, data1.length + data2.length, data3.length);
        var median = new Median();
        var m1 = median.evaluate(data1);
        var m2 = median.evaluate(data2);
        var m3 = median.evaluate(data3);
        var mApprox = median.evaluate(new double[]{m1, m2, m3});
        System.out.println("Median: " + mApprox);
        System.out.println("Real median: " + median.evaluate(data));

        var percentile = new PSquarePercentile(50);
        for (var d : data) {
            percentile.increment(d);
        }
        System.out.println("Percentile: " + percentile.getResult());


    }


}
